<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>–ê–¥–º–∏–Ω–∫–∞ ‚Äî –¢—Ä–µ–∫–∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
 <style>
    body {
        font-family: system-ui, Arial;
        padding: 24px;
        max-width: 960px;
        margin: 0 auto;
    }

    h1 {
        margin-top: 0;
    }

    a {
        text-decoration: none;
        color: #0067b8;
    }

    a:hover {
        text-decoration: underline;
    }

    /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
    .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    /* === –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø === */
    .notice {
        padding: 10px 14px;
        margin-bottom: 16px;
        border-radius: 4px;
        font-size: 14px;
    }

    .notice-ok {
        background: #e6ffed;
        border: 1px solid #b2f2bb;
        color: #0b8a2e;
    }

    .notice-error {
        background: #fff5f5;
        border: 1px solid #ffc9c9;
        color: #c92a2a;
    }

    /* === –ë–õ–û–ö –ò–ù–°–¢–†–£–ú–ï–ù–¢–û–í === */
    .tools {
        margin: 10px 0 24px 0;
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
    }

    .btn,
    .inline-form button {
        display: inline-block;
        padding: 8px 14px;
        background: #007cba;
        color: #fff !important;
        border-radius: 4px;
        text-decoration: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
    }

    .btn:hover,
    .inline-form button:hover {
        background: #005a85;
    }

    .inline-form input[type="file"] {
        padding: 6px 8px;
        font-size: 13px;
    }

    .inline-form {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    /* === –¢–ê–ë–õ–ò–¶–ê –¢–†–ï–ö–û–í === */
    .tracks {
        margin-top: 24px;
        border-top: 1px solid #eee;
    }

    .row {
        display: grid;
        grid-template-columns: 50px 1fr 80px 200px 140px;
        gap: 8px;
        padding: 8px 0;
        border-bottom: 1px solid #f1f1f1;
        align-items: center;
    }

    .row.head {
        font-weight: 600;
        background: #fafafa;
    }

    form.inline {
        display: contents;
    }

    input[type="text"],
    input[type="number"],
    textarea {
        width: 100%;
        padding: 6px 8px;
        font-size: 13px;
        box-sizing: border-box;
    }

    textarea {
        min-height: 48px;
        resize: vertical;
    }

    button {
        padding: 6px 10px;
        font-size: 13px;
        cursor: pointer;
    }

    .muted {
        color: #777;
        font-size: 12px;
    }

    .actions {
        display: flex;
        gap: 6px;
    }
</style>

</head>
<body>
  <div class="top-bar">
    <h1>üéµ –ö–ê–ó–£ ‚Äî —Ç—Ä–µ–∫–∏</h1>
    <div>
      <a href="/admin_web/broadcasts">–†–∞—Å—Å—ã–ª–∫–∏</a> |
      <a href="/admin_web/logout">–í—ã–π—Ç–∏</a>
    </div>
  </div>

  {% if restore_status == "ok" %}
    <div class="notice notice-ok">
      ‚úÖ –ë—ç–∫–∞–ø —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
    </div>
  {% elif restore_status == "missing" %}
    <div class="notice notice-error">
      ‚ö†Ô∏è –ù–µ –≤—ã–±—Ä–∞–Ω —Ñ–∞–π–ª –∞—Ä—Ö–∏–≤–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
    </div>
  {% endif %}

  <div class="tools">
    <a class="btn" href="/admin_web/backup">üíæ –°–∫–∞—á–∞—Ç—å –±—ç–∫–∞–ø</a>

    <form class="inline-form"
          action="/admin_web/restore"
          method="post"
          enctype="multipart/form-data"
          onsubmit="return confirm('–ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –±–∞–∑—É –∏ —Ñ–∞–π–ª—ã –∏–∑ –∞—Ä—Ö–∏–≤–∞?');">
      <input type="file" name="archive" accept=".zip" required>
      <button type="submit">üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞</button>
    </form>
  </div>

  <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫</h2>
  <form action="/admin_web/tracks/new" method="post">
    <p>
      <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å ‚Äî –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏<br>
        <input type="text" name="title" required placeholder="–ö–æ–º–±–∏–Ω–∞—Ü–∏—è ‚Äî Russian Girl">
      </label>
    </p>
    <p>
      <label>–ë–∞–ª–ª—ã<br>
        <input type="number" name="points" value="2" min="1">
      </label>
    </p>
    <p>
      <label>–ü–æ–¥—Å–∫–∞–∑–∫–∞ (–±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç–∞ —Å–ø–æ–π–ª–µ—Ä–æ–º –≤ Telegram)<br>
        <textarea name="hint" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, ¬´–†–æ—Å—Å–∏–π—Å–∫–∞—è –ø–æ–ø-–≥—Ä—É–ø–ø–∞ –∫–æ–Ω—Ü–∞ 80-—Ö¬ª"></textarea>
      </label>
    </p>
    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫</button>
  </form>

  <h2>–°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤</h2>
  <div class="tracks">
    <div class="row head">
      <div>ID</div>
      <div>–¢—Ä–µ–∫</div>
      <div>–ë–∞–ª–ª—ã</div>
      <div>–ü–æ–¥—Å–∫–∞–∑–∫–∞ / –°—Ç–∞—Ç—É—Å</div>
      <div>–î–µ–π—Å—Ç–≤–∏—è</div>
    </div>

    {% for t in tracks %}
      {% set id = t[0] %}
      {% set title = t[1] %}
      {% set points = t[2] %}
      {% set hint = t[3] %}
      {% set is_active = t[4] %}
      <div class="row">
        <div>#{{ id }}</div>
        <form class="inline" action="/admin_web/tracks/{{ id }}/edit" method="post">
          <div>
            <input type="text" name="title" value="{{ title }}">
          </div>
          <div>
            <input type="number" name="points" value="{{ points }}" min="1">
          </div>
          <div>
            <textarea name="hint">{{ hint or "" }}</textarea>
            <div class="muted">
              <label>
                <input type="checkbox" name="is_active" value="1" {% if is_active %}checked{% endif %}>
                –∞–∫—Ç–∏–≤–µ–Ω
              </label>
            </div>
          </div>
          <div class="actions">
            <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
        </form>
        <form class="inline" action="/admin_web/tracks/{{ id }}/delete" method="post"
              onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–∫ #{{ id }}?');">
          <div></div><div></div><div></div>
          <div class="actions">
            <button type="submit">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        </form>
      </div>
    {% endfor %}
  </div>
</body>
</html>
